tail()
gapminder %>%
filter(country == "China" | country == "United States " ) %>%
head()
gapminder %>%
filter(country == "China"  )
print(gapminder)
gapminder %>%
filter(country == "China"|country == "United States" )
gapminder %>%
filter(country == "China"|country == "United States" ) %>%
mutate(GDP = pop*gdpPercap)
gapminder %>%
filter(country == "China"|country == "United States" ) %>%
mutate(GDP = pop*gdpPercap) %>%
gapminder %>%
filter(country == "China"|country == "United States" ) %>%
mutate(GDP = pop*gdpPercap) %>%
group_by(year)
gapminder %>%
filter(country == "China"|country == "United States" ) %>%
mutate(GDP = pop*gdpPercap) %>%
group_by(year)
gapminder %>%
filter(country == "China"|country == "United States" ) %>%
mutate(GDP = pop*gdpPercap)
gapminder %>%
mutate(GDP = pop*gdpPercap) %>%
filter(country == "China"|country == "United States" )
gapminder %>%
mutate(GDP = pop*gdpPercap) %>%
filter(country == "China") %>%
Country_Pop <- select(.gapminder,country,year,pop)
gapminder %>%
mutate(GDP = pop*gdpPercap) %>%
filter(country == "China") %>%
Country_Pop <- select(gapminder,country,year,pop)
Country_Pop <- select(gapminder,country,year,pop)
Country_LifeExp <- select(gapminder,country,year,lifeExp)
# Save objects to a RData file
save(Country_Pop, Country_LifeExp, file="My.RData")
getwd
getwd
getwd()
# Load a RData file
load("My.RData")
# Save objects to a .csv file
write.csv(Country_LifeExp, file="Country_LifeExp.csv")
# Save objects to a .xlsx file
write.xlsx(Country_LifeExp, file="Country_LifeExp.xlsx")
# Save objects to a .csv file
write.csv(Country_LifeExp, file="Country_LifeExp.csv")
TotalGDP_USA <- gapminder %>%
filter(country == "United States" ) %>%
mutate(TotalGDP = pop * gdpPercap) %>%
select(year,TotalGDP)
TotalGDP_China <- gapminder %>%
filter(country == "China" ) %>%
mutate(TotalGDP = pop * gdpPercap) %>%
select(year,TotalGDP)
left_join(TotalGDP_USA,TotalGDP_China,by="year") %>%
mutate(diff = TotalGDP.x - TotalGDP.y) %>%
# Make the plot
ggplot(aes(x=year, y=diff)) +
geom_line()
# Plot two lines
gapminder %>%
filter(country == "United States" | country == "China" ) %>%
mutate(TotalGDP = pop * gdpPercap) %>%
ggplot(aes(x=year, y=TotalGDP, color=country)) +
geom_line()
library(gapminder)
library(ggplot2)
library(dplyr)
library(tidyr)
TotalGDP_USA <- gapminder %>%
filter(country == "United States" ) %>%
mutate(TotalGDP = pop * gdpPercap) %>%
select(year,TotalGDP)
TotalGDP_China <- gapminder %>%
filter(country == "China" ) %>%
mutate(TotalGDP = pop * gdpPercap) %>%
select(year,TotalGDP)
left_join(TotalGDP_USA,TotalGDP_China,by="year") %>%
mutate(diff = TotalGDP.x - TotalGDP.y) %>%
# Make the plot
ggplot(aes(x=year, y=diff)) +
geom_line()
# Plot two lines
gapminder %>%
filter(country == "United States" | country == "China" ) %>%
mutate(TotalGDP = pop * gdpPercap) %>%
ggplot(aes(x=year, y=TotalGDP, color=country)) +
geom_line()
gapminder %>%
filter(continent == 'Africa') %>%
group_by(country) %>%
ggplot(aes(x=year,y=pop,colot = country)) +
geom_line()+
facet_wrap(~ country)
gapminder %>%
filter(continent == 'Africa') %>%
group_by(country) %>%
ggplot(aes(x=year,y=pop,color = country)) +
geom_line()+
facet_wrap(~ country)
WindSpeedtb
library(tidyr)
library(dplyr)
library(ggplot2)
WindSpeed <- read.csv(file = "2281305.csv", header = T)
WindSpeedtb <- as_tibble(WindSpeed)
setWd("I:/ESE5023/ESE5023_Assignments")
setwd("I:/ESE5023/ESE5023_Assignments")
library(tidyr)
library(dplyr)
library(ggplot2)
WindSpeed <- read.csv(file = "2281305.csv", header = T)
WindSpeedtb <- as_tibble(WindSpeed)
WindSpeedtb
WindSpeedtb %>%
filter(substr(WND,1,3)!=999)
WindSpeedtb
WindSpeedtb %>%
filter(substr(WND,1,3)!=999) %>%
unique(substr(WND,5,5))
WindSpeedtb %>%
filter(substr(WND,1,3)!=999) %>%
select(WND) %>%
pull %>%
unique(substr(WND,5,5))
WindSpeedtb %>%
filter(substr(WND,1,3)!=999) %>%
select(WND) %>%
pull %>%
unique(substr(WND,5,5))
WindSpeedtb %>%
filter(substr(WND,1,3)!=999) %>%
select(WND) %>%
pull
unique(substr(WND1,5,5))
WND1<- WindSpeedtb %>%
filter(substr(WND,1,3)!=999) %>%
select(WND) %>%
pull
unique(substr(WND1,5,5))
#check the type code
unique(substr(WND1,7,7))
#check the type speed rate
unique(substr(WND1,9,12))
#check the type speed rate
range(as.numeric((substr(WND1,9,12))))
#check the type speed rate
unique(substr(WND1,9,12))
#check the speed quality code
unique(substr(WND1,14,14))
WindSpeedtb
#Plot monthly averaged wind speed as a function of the observation time.
WindSpeedtb %>%
as.date(DATE)
#Plot monthly averaged wind speed as a function of the observation time.
WindSpeedtb %>%
as.date(DATE)
library(tidyr)
library(dplyr)
library(ggplot2)
WindSpeedtb %>%
as.date(DATE)
#Plot monthly averaged wind speed as a function of the observation time.
WindSpeedtb %>%
as.Date(DATE)
?  as.Date
#Plot monthly averaged wind speed as a function of the observation time.
WindSpeedtb %>%
as.Date(WindSpeedtb$DATE)
#Plot monthly averaged wind speed as a function of the observation time.
WindSpeedtb %>%
as.Date(WindSpeedtb$DATE)
WindSpeedtb %>%
as.Date(DATE)
WindSpeedtb %>%
as.Date(DATE,"%Y-%m-%d")
DATE1 <- WindSpeedtb$DATE %>%pull
DATE1 <- WindSpeedtb$DATE %>%pull
DATE1 <- WindSpeedtb$DATE %>%
pull
DATE1 <- WindSpeedtb$DATE
DATE2 <- as.Date(DATE1)
WindSpeedtb %>%
mutate(DATE3 = DATE2)
DATE2 <- as.Date(DATE1,"%Y-%m")
DATE2 <- as.Date(DATE1,"%Y-%m-%d")
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
group_by(DATE3)
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
group_by(DATE3)
WindSpeedtb %>%
filter(substr(WND,1,3)!=999) %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean())
WindSpeedtb %>%
filter(substr(WND,1,3)!=999) %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
group_by(DATE3)
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3)
summarise(MONTHLYMEAN = mean(
as.numeric(substr(WND,9,12))
))
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(
as.numeric(substr(WND,9,12))
))
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot()
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot()
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot()+
geom_line()
ggplot(aes(x=unique(DATE3),y=MONTHLYMEAN))+
geom_line()
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot(aes(x=unique(DATE3),y=MONTHLYMEAN))+
geom_line()
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot(aes(x=DATE3,y=MONTHLYMEAN))+
geom_line()
DATE_X <- WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
select(DATE3) %>%
pull
DATE_X <- as.numeric(
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
select(DATE3) %>%
pull
)
DATE_X <- WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
select(DATE3) %>%
pull
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot(aes(x=DATE_X,y=MONTHLYMEAN))+
geom_line()
DATE_X <- WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
select(DATE3) %>%
unique()
View(DATE_X)
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot(aes(x=DATE_X,y=MONTHLYMEAN))+
geom_line()
DATE_X <- WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
select(DATE3) %>%
unique() %>%
pull
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot(aes(x=DATE_X,y=MONTHLYMEAN))+
geom_line()
?ggplot
DATE_X <- as.date(WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
select(DATE3) %>%
unique() %>%
pull
)
DATE_X <- as.Date(WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
select(DATE3) %>%
unique() %>%
pull
)
DATE_X <- WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
select(DATE3) %>%
unique() %>%
pull
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot(DATE_X~MONTHLYMEAN)+
geom_line()
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot(aes(x=DATE_X,y=MONTHLYMEAN),)+
geom_line()
as.numeric(substr(WND,9,12))
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12))))
substr(DATE2,1,7)
ccals
class(substr(DATE2,1,7))
as.numeric(substr(DATE2,1,7))
as.Date(substr(DATE2,1,7))
as.Date(substr(DATE2,1,7),"%Y-%M")
as.Date(substr(DATE2,1,7),"%Y-%M-%D")
as.Date(substr(DATE2,1,7),"%Y-%M-NA")
as.Date(substr(DATE2,1,7),"%Y-%M")
as.Date(substr(DATE2,1,7),"%Y-%M-%D")
as.Date(substr(DATE2,1,7),"%Y-%m")
install.packages("zoo")
library(zoo)
DATE_X <- as.yearmon(
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
select(DATE3) %>%
unique() %>%
pull
)
WindSpeedtb %>%
mutate(DATE3 = substr(DATE2,1,7)) %>%
filter(substr(WND,1,3)!=999) %>%
group_by(DATE3) %>%
summarise(MONTHLYMEAN = mean(as.numeric(substr(WND,9,12)))) %>%
ggplot(aes(x=DATE_X,y=MONTHLYMEAN),)+
geom_line()
library(zoo)
Water_Data <- read.csv("marine_water_quality.csv")
library(tidyr)
library(dplyr)
library(ggplot2)
Water_Data <- read.csv("marine_water_quality.csv")
Water_Data_tbl <- as_tibble(Water_Data)
Water_Data_tbl %>%
filter(Water_NTU != 'N/A')
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A')
View(Water_Data_tbl)
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates))
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates))
View(Water_Data_tbl)
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = Turbidity..NTU.))
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = Turbidity..NTU.))+
geom_line()
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.))+
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.))+
geom_line()
Water_Data <- read.csv("marine_water_quality.csv")
#This file is from 钂嬫旦, who also use it for the assignment.
#In this problem, I want to analyze the turbidity (NTU) of this site
#7.1 Clean the data
Water_NTU <- Water_Data$Turbidity..NTU.
Water_NTU[which(Water_NTU == 'N/A')] <- NA
Water_NTU <- as.numeric(Water_NTU)
#7.2
Water_date <- as.Date(Water_Data$Dates)
plot(Water_date,Water_NTU,lwd=1, type = "l", col="blue")
#7.3
max(Water_NTU, na.rm = TRUE)
min(Water_NTU, na.rm = TRUE)
mean(Water_NTU, na.rm = TRUE)
var(Water_NTU, na.rm = TRUE)
quantile(Water_NTU, na.rm = TRUE)
library(tidyr)
library(dplyr)
library(ggplot2)
Water_Data <- read.csv("marine_water_quality.csv")
Water_Data_tbl <- as_tibble(Water_Data)
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.))+
geom_line()
library(tidyr)
library(dplyr)
library(ggplot2)
Water_Data <- read.csv("marine_water_quality.csv")
Water_Data_tbl <- as_tibble(Water_Data)
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.))+
geom_line()
library(tidyr)
library(dplyr)
library(ggplot2)
library(tidyr)
library(dplyr)
library(ggplot2)
Water_Data <- read.csv("marine_water_quality.csv")
Water_Data_tbl <- as_tibble(Water_Data)
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.))+
geom_line()
library(tidyr)
library(dplyr)
library(ggplot2)
Water_Data <- read.csv("marine_water_quality.csv")
Water_Data_tbl <- as_tibble(Water_Data)
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.))+
geom_line()
library(tidyr)
library(dplyr)
library(ggplot2)
Water_Data <- read.csv("marine_water_quality.csv")
Water_Data_tbl <- as_tibble(Water_Data)
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.))+
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.))
library(tidyr)
library(dplyr)
library(ggplot2)
Water_Data <- read.csv("marine_water_quality.csv")
Water_Data_tbl <- as_tibble(Water_Data)
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.))
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.)))
library(tidyr)
library(dplyr)
library(ggplot2)
Water_Data <- read.csv("marine_water_quality.csv")
Water_Data_tbl <- as_tibble(Water_Data)
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.)))
Water_Data_tbl %>%
filter(Turbidity..NTU. != 'N/A') %>%
mutate(DATE = as.Date(Dates)) %>%
ggplot(aes(x = DATE, y = as.numeric(Turbidity..NTU.)))+
geom_line()
